(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{BPec:function(l,n,u){"use strict";u.r(n);var t=u("CcnG"),i=function(){return function(){}}(),o=u("pMnS"),e=u("oBZk"),s=u("ZZ/e"),b=u("Ip0R"),r=u("QaJk"),a=u("ri4K"),m=u("9B/o"),c=u("wd/R"),_=function(){function l(l,n,u,t,i,o,e){var s=this;this.router=l,this.authenticationService=n,this.route=u,this.iab=t,this.submissionService=i,this.navController=o,this.alertCtrl=e,this.appSettings={},this.fieldLabels={site_name:"Site Name",total_rubbish:"Materials Used",comments:"Comments"},this.loading=!0,this.submission={id:this.route.snapshot.params.id},this.getSubmission(),this.user={},this.authenticationService.getUserData().subscribe((function(l){s.user=l,s.user.groups.length>0&&(s.appSettings=s.user.groups[0],s.appSettings.field_labels&&(s.fieldLabels=JSON.parse(s.appSettings.field_labels)))}))}return l.prototype.ngOnInit=function(){},l.prototype.getSubmission=function(){var l=this;this.submissionService.getSubmission(this.submission.id).then((function(n){l.submission=n,l.loading=!1}))},l.prototype.deleteSubmission=function(){var l=this;this.alertCtrl.create({header:"Are you sure?",message:"You are about to delete this timesheet submission. This cannot be undone.",buttons:[{text:"Cancel",role:"cancel",handler:function(l){}},{text:"Delete",handler:function(n){l.submissionService.deleteSubmission(l.submission.id).then((function(){l.alertCtrl.create({header:"Submission delete",message:"This timesheet submission has been removed.",buttons:[{text:"Dismiss",role:"cancel",handler:function(l){}}]}).then((function(l){l.present()})),l.loading=!1,l.authenticationService.retreiveUserData().then((function(){})),l.navController.back()})).catch((function(){l.alertCtrl.create({header:"Error",message:"There was an error while deleting your submission.",buttons:[{text:"Cancel",role:"cancel",handler:function(l){}},{text:"Try Again",handler:function(n){setTimeout((function(){l.deleteSubmission()}),200)}}]}).then((function(l){l.present()}))}))}}]}).then((function(l){l.present()}))},l.prototype.formatDate=function(l){return c(l).format("DD/MM/YYYY")},l.prototype.formatDatabase=function(l){return c(l).format("YYYY-MM-DD")},l.prototype.formatLongDate=function(l){return c(l).format("dddd Do MMM")},l.prototype.formatFromNow=function(l){return c(l).fromNow()},l.prototype.formatFromNowServer=function(l){var n=-(new Date).getTimezoneOffset();return c(l).add(n,"m").fromNow()},l}(),p=u("ZYCi"),g=t.rb({encapsulation:0,styles:[[".submission[_ngcontent-%COMP%]   .submission__loading[_ngcontent-%COMP%]{text-align:center;margin-top:60px}.submission[_ngcontent-%COMP%]   .submission__read-status[_ngcontent-%COMP%]{padding-top:20px;padding-left:15px;padding-right:15px}.submission[_ngcontent-%COMP%]   .submission__read-status[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:10px;vertical-align:middle;font-size:20px;opacity:.5}.submission[_ngcontent-%COMP%]   .submission__form-group__title[_ngcontent-%COMP%]{padding:10px 15px;border-bottom:1px solid #eb1c24}.submission[_ngcontent-%COMP%]   .submission__form-group__field__value[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:700}.submission[_ngcontent-%COMP%]   .submission__form-group__field__value[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700;white-space:normal}.submission[_ngcontent-%COMP%]   .submission__form-group__field__value[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{white-space:normal}.submission[_ngcontent-%COMP%]   .submission__form-group__field__value.submission__form-group__field__value--question-group[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{padding:0 15px;margin-bottom:10px;margin-top:5px;display:block}.submission[_ngcontent-%COMP%]   .submission__form-group__field__value.submission__form-group__field__value--question-group[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{max-height:200px;background-color:#f7f7f7;border:1px solid #dedede;padding:15px;margin:0 15px}.submission[_ngcontent-%COMP%]   .submission__form-group__field__value.submission__form-group__field__value--image[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{padding:0 15px;display:block}.submission[_ngcontent-%COMP%]   .submission__form-group__field__value.submission__form-group__field__value--image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px solid #000;margin-top:10px;margin-bottom:5px}"]],data:{}});function f(l){return t.Lb(0,[(l()(),t.tb(0,0,null,null,2,"div",[["class","submission__loading"]],null,null,null,null,null)),(l()(),t.tb(1,0,null,null,1,"ion-spinner",[["color","primary"]],null,null,null,e.L,e.p)),t.sb(2,49152,null,0,s.sb,[t.h,t.k,t.z],{color:[0,"color"]},null)],(function(l,n){l(n,2,0,"primary")}),null)}function d(l){return t.Lb(0,[(l()(),t.tb(0,0,null,null,7,"ion-item",[],null,null,null,e.H,e.l)),t.sb(1,49152,null,0,s.H,[t.h,t.k,t.z],null,null),(l()(),t.tb(2,0,null,0,5,"ion-label",[["class","ion-text-wrap"]],null,null,null,e.I,e.m)),t.sb(3,49152,null,0,s.N,[t.h,t.k,t.z],null,null),(l()(),t.tb(4,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),t.Kb(-1,null,["No Break"])),(l()(),t.tb(6,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),t.Kb(-1,0,[" True "]))],null,null)}function h(l){return t.Lb(0,[(l()(),t.tb(0,0,null,null,52,"div",[],null,null,null,null,null)),(l()(),t.tb(1,0,null,null,51,"ion-list",[],null,null,null,e.K,e.n)),t.sb(2,49152,null,0,s.O,[t.h,t.k,t.z],null,null),(l()(),t.tb(3,0,null,0,7,"ion-item",[],null,null,null,e.H,e.l)),t.sb(4,49152,null,0,s.H,[t.h,t.k,t.z],null,null),(l()(),t.tb(5,0,null,0,5,"ion-label",[["class","ion-text-wrap"]],null,null,null,e.I,e.m)),t.sb(6,49152,null,0,s.N,[t.h,t.k,t.z],null,null),(l()(),t.tb(7,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),t.Kb(-1,null,["Submission Date"])),(l()(),t.tb(9,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),t.Kb(10,0,[" "," "])),(l()(),t.tb(11,0,null,0,7,"ion-item",[],null,null,null,e.H,e.l)),t.sb(12,49152,null,0,s.H,[t.h,t.k,t.z],null,null),(l()(),t.tb(13,0,null,0,5,"ion-label",[["class","ion-text-wrap"]],null,null,null,e.I,e.m)),t.sb(14,49152,null,0,s.N,[t.h,t.k,t.z],null,null),(l()(),t.tb(15,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),t.Kb(-1,null,["Start Time"])),(l()(),t.tb(17,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),t.Kb(18,0,[" "," "])),(l()(),t.tb(19,0,null,0,7,"ion-item",[],null,null,null,e.H,e.l)),t.sb(20,49152,null,0,s.H,[t.h,t.k,t.z],null,null),(l()(),t.tb(21,0,null,0,5,"ion-label",[["class","ion-text-wrap"]],null,null,null,e.I,e.m)),t.sb(22,49152,null,0,s.N,[t.h,t.k,t.z],null,null),(l()(),t.tb(23,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),t.Kb(-1,null,["End Time"])),(l()(),t.tb(25,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),t.Kb(26,0,[" "," "])),(l()(),t.tb(27,0,null,0,7,"ion-item",[],null,null,null,e.H,e.l)),t.sb(28,49152,null,0,s.H,[t.h,t.k,t.z],null,null),(l()(),t.tb(29,0,null,0,5,"ion-label",[["class","ion-text-wrap"]],null,null,null,e.I,e.m)),t.sb(30,49152,null,0,s.N,[t.h,t.k,t.z],null,null),(l()(),t.tb(31,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),t.Kb(32,null,["",""])),(l()(),t.tb(33,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),t.Kb(34,0,[" "," "])),(l()(),t.tb(35,0,null,0,7,"ion-item",[],null,null,null,e.H,e.l)),t.sb(36,49152,null,0,s.H,[t.h,t.k,t.z],null,null),(l()(),t.tb(37,0,null,0,5,"ion-label",[["class","ion-text-wrap"]],null,null,null,e.I,e.m)),t.sb(38,49152,null,0,s.N,[t.h,t.k,t.z],null,null),(l()(),t.tb(39,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),t.Kb(40,null,["",""])),(l()(),t.tb(41,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),t.Kb(42,0,[" "," "])),(l()(),t.tb(43,0,null,0,7,"ion-item",[],null,null,null,e.H,e.l)),t.sb(44,49152,null,0,s.H,[t.h,t.k,t.z],null,null),(l()(),t.tb(45,0,null,0,5,"ion-label",[["class","ion-text-wrap"]],null,null,null,e.I,e.m)),t.sb(46,49152,null,0,s.N,[t.h,t.k,t.z],null,null),(l()(),t.tb(47,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),t.Kb(48,null,["",""])),(l()(),t.tb(49,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),t.Kb(50,0,[" "," "])),(l()(),t.ib(16777216,null,0,1,null,d)),t.sb(52,16384,null,0,b.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,52,0,n.component.submission.no_break)}),(function(l,n){var u=n.component;l(n,10,0,u.formatDate(u.submission.submission_date)),l(n,18,0,u.submission.start_time),l(n,26,0,u.submission.end_time),l(n,32,0,u.fieldLabels.site_name),l(n,34,0,u.submission.site_name),l(n,40,0,u.fieldLabels.total_rubbish),l(n,42,0,u.submission.total_rubbish),l(n,48,0,u.fieldLabels.comments),l(n,50,0,u.submission.comments)}))}function C(l){return t.Lb(0,[(l()(),t.tb(0,0,null,null,18,"ion-header",[],null,null,null,e.E,e.i)),t.sb(1,49152,null,0,s.B,[t.h,t.k,t.z],null,null),(l()(),t.tb(2,0,null,0,16,"ion-toolbar",[["color","primary"]],null,null,null,e.R,e.v)),t.sb(3,49152,null,0,s.Cb,[t.h,t.k,t.z],{color:[0,"color"]},null),(l()(),t.tb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,e.z,e.d)),t.sb(5,49152,null,0,s.l,[t.h,t.k,t.z],null,null),(l()(),t.tb(6,0,null,0,2,"ion-back-button",[["defaultHref","/start"]],null,[[null,"click"]],(function(l,n,u){var i=!0;return"click"===n&&(i=!1!==t.Eb(l,8).onClick(u)&&i),i}),e.x,e.b)),t.sb(7,49152,null,0,s.g,[t.h,t.k,t.z],{defaultHref:[0,"defaultHref"]},null),t.sb(8,16384,null,0,s.h,[[2,s.ib],s.Ib],{defaultHref:[0,"defaultHref"]},null),(l()(),t.tb(9,0,null,0,2,"ion-title",[],null,null,null,e.Q,e.u)),t.sb(10,49152,null,0,s.Ab,[t.h,t.k,t.z],null,null),(l()(),t.Kb(11,0,[" "," "])),(l()(),t.tb(12,0,null,0,6,"ion-buttons",[["slot","end"]],null,null,null,e.z,e.d)),t.sb(13,49152,null,0,s.l,[t.h,t.k,t.z],null,null),(l()(),t.tb(14,0,null,0,4,"ion-button",[],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.deleteSubmission()&&t),t}),e.y,e.c)),t.sb(15,49152,null,0,s.k,[t.h,t.k,t.z],null,null),(l()(),t.tb(16,0,null,0,1,"ion-icon",[["name","trash"],["slot","start"]],null,null,null,e.F,e.j)),t.sb(17,49152,null,0,s.C,[t.h,t.k,t.z],{name:[0,"name"]},null),(l()(),t.Kb(-1,0,[" Delete "])),(l()(),t.tb(19,0,null,null,5,"ion-content",[["class","submission"]],null,null,null,e.B,e.f)),t.sb(20,49152,null,0,s.u,[t.h,t.k,t.z],null,null),(l()(),t.ib(16777216,null,0,1,null,f)),t.sb(22,16384,null,0,b.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.ib(16777216,null,0,1,null,h)),t.sb(24,16384,null,0,b.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,3,0,"primary"),l(n,7,0,"/start"),l(n,8,0,"/start"),l(n,17,0,"trash"),l(n,22,0,u.loading),l(n,24,0,!u.loading)}),(function(l,n){var u=n.component;l(n,11,0,u.formatLongDate(u.submission.submission_date))}))}function k(l){return t.Lb(0,[(l()(),t.tb(0,0,null,null,1,"app-submission",[],null,null,null,C,g)),t.sb(1,114688,null,0,_,[p.m,a.a,p.a,m.a,r.a,s.Ib,s.a],null,null)],(function(l,n){l(n,1,0)}),null)}var M=t.pb("app-submission",_,k,{},{},[]),O=u("gIcY"),v=function(){return function(){}}();u.d(n,"SubmissionPageModuleNgFactory",(function(){return x}));var x=t.qb(i,[],(function(l){return t.Bb([t.Cb(512,t.j,t.bb,[[8,[o.a,M]],[3,t.j],t.x]),t.Cb(4608,b.l,b.k,[t.u,[2,b.w]]),t.Cb(4608,O.j,O.j,[]),t.Cb(4608,s.b,s.b,[t.z,t.g]),t.Cb(4608,s.Hb,s.Hb,[s.b,t.j,t.q]),t.Cb(4608,s.Kb,s.Kb,[s.b,t.j,t.q]),t.Cb(1073742336,b.b,b.b,[]),t.Cb(1073742336,O.i,O.i,[]),t.Cb(1073742336,O.b,O.b,[]),t.Cb(1073742336,s.Eb,s.Eb,[]),t.Cb(1073742336,p.p,p.p,[[2,p.u],[2,p.m]]),t.Cb(1073742336,v,v,[]),t.Cb(1073742336,i,i,[]),t.Cb(1024,p.k,(function(){return[[{path:"",component:_}]]}),[])])}))}}]);