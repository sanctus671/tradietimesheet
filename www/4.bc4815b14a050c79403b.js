(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{zDS7:function(n,e,t){"use strict";t.r(e);var l=t("CcnG"),o=t("ZZ/e"),a=t("ri4K"),r=t("9B/o"),u=t("QaJk"),i=t("wd/R"),c=function(){function n(n,e,t,l,o,a){var r=this;this.plt=n,this.authenticationService=e,this.alertCtrl=t,this.iab=l,this.submissionService=o,this.loadingController=a,this.user={},this.authenticationService.getUserData().subscribe((function(n){r.user=n}))}return n.prototype.ngOnInit=function(){},n.prototype.ionViewDidEnter=function(){},n.prototype.openChangeName=function(){var n=this;this.alertCtrl.create({header:"Change Name",inputs:[{name:"name",placeholder:"Name",type:"text",value:this.user.name}],buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Change",handler:function(e){e.name&&n.authenticationService.changeName(e.name).then((function(){n.authenticationService.retreiveUserData().then((function(){})),n.alertCtrl.create({header:"Success",message:"Your name has been updated",buttons:[{text:"Dismiss",role:"cancel",handler:function(n){}}]}).then((function(n){n.present()}))})).catch((function(){n.alertCtrl.create({header:"Error",message:"There was an error while changing your name.",buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Try Again",handler:function(e){setTimeout((function(){n.openChangeName()}),200)}}]}).then((function(n){n.present()}))}))}}]}).then((function(n){n.present()}))},n.prototype.openChangeEmail=function(){var n=this;this.alertCtrl.create({header:"Change Email",inputs:[{name:"email",placeholder:"Email",type:"text",value:this.user.email}],buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Change",handler:function(e){e.email&&n.authenticationService.changeEmail(e.email).then((function(){n.authenticationService.retreiveUserData().then((function(){})),n.alertCtrl.create({header:"Success",message:"Your email has been updated",buttons:[{text:"Dismiss",role:"cancel",handler:function(n){}}]}).then((function(n){n.present()}))})).catch((function(){n.alertCtrl.create({header:"Error",message:"There was an error while changing your email.",buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Try Again",handler:function(e){setTimeout((function(){n.openChangeEmail()}),200)}}]}).then((function(n){n.present()}))}))}}]}).then((function(n){n.present()}))},n.prototype.deleteAccount=function(){var n=this;this.alertCtrl.create({header:"WARNING: You are about to delete your account",message:"All your data associated with this account will be erased. This cannot be undone.",buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Delete",handler:function(e){n.authenticationService.deleteUser().then((function(){n.alertCtrl.create({header:"Account deleted",message:"Your account has been removed",buttons:[{text:"Dismiss",role:"cancel",handler:function(n){}}]}).then((function(n){n.present()})),n.logout()})).catch((function(){n.alertCtrl.create({header:"Error",message:"There was an error while deleting your account.",buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Try Again",handler:function(e){setTimeout((function(){n.deleteAccount()}),200)}}]}).then((function(n){n.present()}))}))}}]}).then((function(n){n.present()}))},n.prototype.openChangePassword=function(){var n=this;this.alertCtrl.create({header:"Change Password",inputs:[{name:"password",placeholder:"Password",type:"password"},{name:"confirmPassword",placeholder:"Confirm Password",type:"password"}],buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Change",handler:function(e){e.password&&e.confirmPassword&&e.password===e.confirmPassword?n.authenticationService.changePassword(n.user.email,e.password,e.confirmPassword).then((function(){n.alertCtrl.create({header:"Success",message:"Your password has been updated",buttons:[{text:"Dismiss",role:"cancel",handler:function(n){}}]}).then((function(n){n.present()}))})).catch((function(){n.alertCtrl.create({header:"Error",message:"There was an error while changing your password.",buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Try Again",handler:function(e){setTimeout((function(){n.openChangePassword()}),200)}}]}).then((function(n){n.present()}))})):n.alertCtrl.create({header:"Error",message:"Passwords do not match",buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Try Again",handler:function(e){setTimeout((function(){n.openChangePassword()}),200)}}]}).then((function(n){n.present()}))}}]}).then((function(n){n.present()}))},n.prototype.formatDate=function(n){return i(n).format("DD/MM/YYYY")},n.prototype.logout=function(){this.authenticationService.logout()},n}(),s=function(){return function(){}}(),h=t("pMnS"),b=t("oBZk"),d=l.rb({encapsulation:0,styles:[[".settings-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{margin-bottom:10px;margin-top:20px;padding-top:10px}.settings-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]:first-child{margin-top:0;padding-top:0}"]],data:{}});function p(n){return l.Lb(0,[(n()(),l.tb(0,0,null,null,6,"ion-header",[],null,null,null,b.C,b.h)),l.sb(1,49152,null,0,o.A,[l.h,l.k,l.z],null,null),(n()(),l.tb(2,0,null,0,4,"ion-toolbar",[["color","primary"]],null,null,null,b.P,b.u)),l.sb(3,49152,null,0,o.Bb,[l.h,l.k,l.z],{color:[0,"color"]},null),(n()(),l.tb(4,0,null,0,2,"ion-title",[],null,null,null,b.O,b.t)),l.sb(5,49152,null,0,o.zb,[l.h,l.k,l.z],null,null),(n()(),l.Kb(-1,0,["Settings"])),(n()(),l.tb(7,0,null,null,36,"ion-content",[],null,null,null,b.z,b.e)),l.sb(8,49152,null,0,o.t,[l.h,l.k,l.z],null,null),(n()(),l.tb(9,0,null,0,34,"ion-list",[["class","settings-list"]],null,null,null,b.I,b.m)),l.sb(10,49152,null,0,o.N,[l.h,l.k,l.z],null,null),(n()(),l.tb(11,0,null,0,6,"ion-item",[["detail",""]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.openChangeName()&&l),l}),b.F,b.k)),l.sb(12,49152,null,0,o.G,[l.h,l.k,l.z],{detail:[0,"detail"]},null),(n()(),l.tb(13,0,null,0,1,"ion-icon",[["color","primary"],["name","person"],["slot","start"]],null,null,null,b.D,b.i)),l.sb(14,49152,null,0,o.B,[l.h,l.k,l.z],{color:[0,"color"],name:[1,"name"]},null),(n()(),l.tb(15,0,null,0,2,"ion-label",[],null,null,null,b.G,b.l)),l.sb(16,49152,null,0,o.M,[l.h,l.k,l.z],null,null),(n()(),l.Kb(-1,0,["Change Name"])),(n()(),l.tb(18,0,null,0,6,"ion-item",[["detail",""]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.openChangeEmail()&&l),l}),b.F,b.k)),l.sb(19,49152,null,0,o.G,[l.h,l.k,l.z],{detail:[0,"detail"]},null),(n()(),l.tb(20,0,null,0,1,"ion-icon",[["color","primary"],["name","mail"],["slot","start"]],null,null,null,b.D,b.i)),l.sb(21,49152,null,0,o.B,[l.h,l.k,l.z],{color:[0,"color"],name:[1,"name"]},null),(n()(),l.tb(22,0,null,0,2,"ion-label",[],null,null,null,b.G,b.l)),l.sb(23,49152,null,0,o.M,[l.h,l.k,l.z],null,null),(n()(),l.Kb(-1,0,["Change Email"])),(n()(),l.tb(25,0,null,0,6,"ion-item",[["detail",""]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.openChangePassword()&&l),l}),b.F,b.k)),l.sb(26,49152,null,0,o.G,[l.h,l.k,l.z],{detail:[0,"detail"]},null),(n()(),l.tb(27,0,null,0,1,"ion-icon",[["color","primary"],["name","unlock"],["slot","start"]],null,null,null,b.D,b.i)),l.sb(28,49152,null,0,o.B,[l.h,l.k,l.z],{color:[0,"color"],name:[1,"name"]},null),(n()(),l.tb(29,0,null,0,2,"ion-label",[],null,null,null,b.G,b.l)),l.sb(30,49152,null,0,o.M,[l.h,l.k,l.z],null,null),(n()(),l.Kb(-1,0,["Change Password"])),(n()(),l.tb(32,0,null,0,4,"ion-item",[],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.logout()&&l),l}),b.F,b.k)),l.sb(33,49152,null,0,o.G,[l.h,l.k,l.z],null,null),(n()(),l.tb(34,0,null,0,1,"ion-icon",[["color","primary"],["name","lock"],["slot","start"]],null,null,null,b.D,b.i)),l.sb(35,49152,null,0,o.B,[l.h,l.k,l.z],{color:[0,"color"],name:[1,"name"]},null),(n()(),l.Kb(-1,0,[" Logout "])),(n()(),l.tb(37,0,null,0,6,"ion-item",[],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.deleteAccount()&&l),l}),b.F,b.k)),l.sb(38,49152,null,0,o.G,[l.h,l.k,l.z],null,null),(n()(),l.tb(39,0,null,0,1,"ion-icon",[["color","danger"],["name","trash"],["slot","start"]],null,null,null,b.D,b.i)),l.sb(40,49152,null,0,o.B,[l.h,l.k,l.z],{color:[0,"color"],name:[1,"name"]},null),(n()(),l.tb(41,0,null,0,2,"ion-label",[["color","danger"]],null,null,null,b.G,b.l)),l.sb(42,49152,null,0,o.M,[l.h,l.k,l.z],{color:[0,"color"]},null),(n()(),l.Kb(-1,0,["Delete Account"]))],(function(n,e){n(e,3,0,"primary"),n(e,12,0,""),n(e,14,0,"primary","person"),n(e,19,0,""),n(e,21,0,"primary","mail"),n(e,26,0,""),n(e,28,0,"primary","unlock"),n(e,35,0,"primary","lock"),n(e,40,0,"danger","trash"),n(e,42,0,"danger")}),null)}function m(n){return l.Lb(0,[(n()(),l.tb(0,0,null,null,1,"app-settings",[],null,null,null,p,d)),l.sb(1,114688,null,0,c,[o.Ib,a.a,o.a,r.a,u.a,o.Fb],null,null)],(function(n,e){n(e,1,0)}),null)}var f=l.pb("app-settings",c,m,{},{},[]),g=t("Ip0R"),C=t("gIcY"),k=t("ZYCi");t.d(e,"SettingsPageModuleNgFactory",(function(){return w}));var w=l.qb(s,[],(function(n){return l.Bb([l.Cb(512,l.j,l.bb,[[8,[h.a,f]],[3,l.j],l.x]),l.Cb(4608,g.l,g.k,[l.u,[2,g.w]]),l.Cb(4608,C.j,C.j,[]),l.Cb(4608,o.b,o.b,[l.z,l.g]),l.Cb(4608,o.Gb,o.Gb,[o.b,l.j,l.q]),l.Cb(4608,o.Jb,o.Jb,[o.b,l.j,l.q]),l.Cb(1073742336,g.b,g.b,[]),l.Cb(1073742336,C.i,C.i,[]),l.Cb(1073742336,C.b,C.b,[]),l.Cb(1073742336,o.Db,o.Db,[]),l.Cb(1073742336,k.p,k.p,[[2,k.u],[2,k.m]]),l.Cb(1073742336,s,s,[]),l.Cb(1024,k.k,(function(){return[[{path:"",component:c}]]}),[])])}))}}]);